# Common Pitfalls and How to Avoid Them
*A practical guide for avoiding frequent mistakes in causal inference and targeted learning*

Even with a solid understanding of the Causal Roadmap and modern estimators, it is easy to make analytic choices that lead to biased, unstable, or misleading results. In real-world evidence (RWE), the stakes are higher: data are messy, treatment pathways are irregular, and credibility depends on careful alignment between the scientific question, identification conditions, and the estimator.

This chapter catalogs common pitfalls encountered in causal inference, especially in pharmacoepidemiologic and longitudinal RWE settings, and provides practical strategies to avoid them.

---

## 1. Pitfall: Confusing Association With Causation  
### The regression coefficient problem

**Mistake:**  
Fitting a multivariable regression and interpreting the treatment coefficient as a causal effect.

**Why it matters:**  
Regression coefficients are typically **conditional associations**, not causal contrasts. Unless the model corresponds to the identified statistical functional and is correctly specified, the result may not estimate the causal estimand.

**Avoid by:**  
- Defining a precise **causal question** and **estimand**  
- Estimating the corresponding statistical functional using **g-computation**, **IPTW**, **AIPW**, or **TMLE**  
- Using flexible nuisance estimation (for example, **SuperLearner**) where appropriate  

---

## 2. Pitfall: Adjusting for Post-Treatment Variables  
### The mediator/collider trap

**Mistake:**  
Including variables measured after treatment initiation in outcome regression or propensity score models.

**Why it matters:**  
- Post-treatment variables may lie on the **causal pathway** (mediators), so adjustment can block part of the effect  
- They may be **colliders**, inducing spurious associations  
- Adjustment can invalidate the intervention being emulated

**Avoid by:**  
- Restricting adjustment to **baseline** confounders for baseline treatment effects  
- Using longitudinal methods (for example, **LTMLE** or **LMTP**) when time-varying confounding affected by prior treatment is present  
- Drawing DAGs to clarify temporal ordering and avoid collider bias  

---

## 3. Pitfall: Violated Positivity or Limited Overlap  
### Treatment not comparable across covariate strata

**Symptoms:**  
- Propensity scores close to 0 or 1  
- Large or highly variable IPTW weights  
- Extreme clever covariate values in TMLE  

**Why it matters:**  
Positivity violations can lead to instability, high variance, and in finite samples, estimand drift toward extrapolation.

**Avoid by:**  
- Inspecting propensity score overlap and weight distributions  
- Truncating or stabilizing weights when justified  
- Restricting to **regions of common support**  
- Considering **stochastic interventions** when static interventions are not feasible in the observed data  

---

## 4. Pitfall: Misspecified Outcome or Propensity Models  
### Relying on simple models in complex settings

**Mistake:**  
Assuming linearity, additivity, or simple parametric relationships without support.

**Why it matters:**  
Misspecification of nuisance functions can create bias, especially for non-collapsible estimands or when overlap is limited.

**Avoid by:**  
- Using **SuperLearner** or other data-adaptive estimation with cross-validation  
- Inspecting calibration and predictive performance (for example, cross-validated risk)  
- Including domain-informed learners when strong structure is known  

---

## 5. Pitfall: Blindly Trusting Machine Learning  
### Flexible models do not guarantee valid inference

**Mistake:**  
Assuming that a strong predictive model implies a correct causal estimate.

**Why it matters:**  
Machine learning can overfit, extrapolate, or yield poorly calibrated probabilities. Prediction quality alone does not ensure correct estimation of a causal functional.

**Avoid by:**  
- Using strict **cross-validation** and avoiding leakage  
- Checking calibration (especially for propensity scores)  
- Using TMLE or other doubly robust approaches to reduce sensitivity to nuisance estimation errors, subject to regularity conditions  

---

## 6. Pitfall: Ignoring Censoring and Informative Dropout  

**Mistake:**  
Treating censoring as non-informative without justification, or ignoring treatment discontinuation and switching when they affect the estimand.

**Why it matters:**  
Informative censoring can bias estimates of risk and survival functionals.

**Avoid by:**  
- Defining censoring relative to the estimand (administrative versus intercurrent event handling)  
- Modeling censoring mechanisms (for example, with SuperLearner) and applying **IPCW** when appropriate  
- Using TMLE/LTMLE with censoring nodes in longitudinal settings  
- Conducting sensitivity analyses for violations of independent censoring  

---

## 7. Pitfall: Over-interpreting Heterogeneous Treatment Effects  
### Subgroup and HTE analyses are fragile

**Mistake:**  
Treating exploratory subgroup findings as confirmatory evidence.

**Why it matters:**  
HTE estimates are often high variance, subject to multiple testing, and sensitive to modeling choices.

**Avoid by:**  
- Pre-specifying subgroups and hypotheses  
- Reporting uncertainty and accounting for multiplicity where relevant  
- Treating causal forest or related approaches as exploratory unless paired with confirmatory design  
- Using targeted-learning-based approaches (for example, TMLE-based variable importance) when aligned with the scientific objective  

---

## 8. Pitfall: Using the Wrong Estimand  
### Odds ratios and hazard ratios are commonly misinterpreted

**Mistake:**  
Defaulting to odds ratios or hazard ratios and interpreting them as causal effects without careful justification.

**Why it matters:**  
- Odds ratios are non-collapsible and may not correspond to the causal contrast of interest  
- Hazard ratios are often difficult to interpret causally in the presence of time-varying hazards and selection into the risk set

**Avoid by:**  
- Targeting risk differences, risk ratios, survival curves, cumulative incidence, or RMST when scientifically appropriate  
- Using methods designed for causal survival analysis (including targeted learning approaches) when time-to-event outcomes are primary  

---

## 9. Pitfall: Not Performing Diagnostics  
### “The model ran” does not imply validity

**Mistake:**  
Reporting results without checking whether key assumptions are approximately supported in the observed data.

**Why it matters:**  
Many failures in applied causal inference arise from detectable issues such as overlap problems, extreme weights, or unstable influence curves.

**Avoid by:**  
- Inspecting weight distributions and effective sample sizes  
- Checking clever covariate ranges and outliers in targeted learning  
- Examining influence curve stability and identifying influential observations  
- Evaluating nuisance model calibration and cross-validated risk  

---

## 10. Pitfall: Neglecting Sensitivity Analyses  
### Unmeasured confounding is not solved by optimism

**Mistake:**  
Assuming exchangeability holds without probing robustness.

**Why it matters:**  
In observational settings, residual confounding is frequently plausible and may change qualitative conclusions.

**Avoid by:**  
- Quantitative bias analysis and sensitivity parameters  
- Negative control outcomes or exposures when feasible  
- E-values (where appropriate) as a screening tool  
- Stochastic or simulation-based sensitivity analyses aligned with the causal model  

---

## 11. Pitfall: Poor Alignment Between Randomized and Real-World Data in Hybrid Designs  

**Mistake:**  
Pooling or comparing RCT and RWD without harmonizing definitions and populations.

**Why it matters:**  
Differences in eligibility, measurement, follow-up, and outcome definitions can dominate causal conclusions.

**Avoid by:**  
- Harmonizing inclusion criteria, covariates, endpoints, and follow-up windows  
- Checking covariate balance and comparability across data sources  
- Using principled external control / transportability approaches where applicable  
- Conducting negative control checks in RWD components  

---

## 12. Pitfall: Reporting Without Context or Interpretation  

**Mistake:**  
Reporting only a point estimate (or a single relative measure) without absolute risks, assumptions, or limitations.

**Why it matters:**  
Causal results are only meaningful relative to the estimand, assumptions, and the population.

**Avoid by:**  
- Reporting absolute risk estimates alongside contrasts  
- Transparently stating identification assumptions and their plausibility  
- Discussing limitations, diagnostics, and sensitivity analyses  
- Framing results in terms of the hypothetical intervention and estimand  

---

## 13. Summary

Common pitfalls arise from misalignment between analytic choices and scientific questions, misspecification, unchecked assumptions, and overinterpretation. Avoiding them requires:

- Explicit use of the Causal Roadmap  
- Diagnostics aligned with identification risks (for example, overlap and censoring)  
- Sensitivity analyses for plausible violations  
- Careful communication of estimands and assumptions  

These practices improve credibility, reproducibility, and decision relevance.
