---
title: "4. SuperLearner and Ensemble Methods"
format:
  html:
    toc: true
    toc-depth: 3
---

# The Idea Behind Super Learner

Super Learner combines multiple models into one optimal prediction algorithm using cross-validation.

```{r, include=FALSE}
# Simulated example of data setup
set.seed(123)
n <- 1000
W <- data.frame(age = rnorm(n, 70, 8), ckd = rbinom(n, 1, 0.2))
A <- rbinom(n, 1, plogis(-1 + 0.02*W$age + 0.6*W$ckd))
Y <- rbinom(n, 1, plogis(-2 + 0.8*A + 0.04*W$age + 0.3*W$ckd))
```

```{r, cache=TRUE}
library(SuperLearner)
set.seed(123)
#sl_lib <- c("SL.glm", "SL.mean", "SL.glmnet", "SL.randomForest")
sl_lib <- c("SL.glm") #simpler library for speed
SL_fit <- SuperLearner(Y, X = W, newX = W, family = binomial(), SL.library = sl_lib)
summary(SL_fit)
```

![Placeholder: diagram showing ensemble model combining base learners.](../images/superlearner_placeholder.png)
*Figure 4. Ensemble learning in Super Learner.*
